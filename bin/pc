#!/usr/bin/ksh
#
# SCRIPT: pc
# AUTHOR: Luciano D. Cecere
# DATE: 11/23/2016-02:12:18 AM
########################################################################
#
# pc - a perpetual calendar!
# Copyright (C) 2016 Luciano D. Cecere <ldante86@aol.com>
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
########################################################################

# {type-of-year}_{day-of-week}_{month}

non_leap_cycle_0_x=""
non_leap_cycle_0_1=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                   "
non_leap_cycle_0_2="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28                                                                   "
non_leap_cycle_0_3="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                          "
non_leap_cycle_0_4="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                    "
non_leap_cycle_0_5="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                "
non_leap_cycle_0_6="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                          "
non_leap_cycle_0_7="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                 "
non_leap_cycle_0_8="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                             "
non_leap_cycle_0_9="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                       "
non_leap_cycle_0_10=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                   "
non_leap_cycle_0_11="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                             "
non_leap_cycle_0_12="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                    "
non_leap_cycle_1_x=""
non_leap_cycle_1_1="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                "
non_leap_cycle_1_2="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28                                                                "
non_leap_cycle_1_3="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                       "
non_leap_cycle_1_4=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                      "
non_leap_cycle_1_5="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                             "
non_leap_cycle_1_6="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                       "
non_leap_cycle_1_7=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                   "
non_leap_cycle_1_8="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                          "
non_leap_cycle_1_9="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                    "
non_leap_cycle_1_10="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                "
non_leap_cycle_1_11="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                          "
non_leap_cycle_1_12="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                 "
non_leap_cycle_2_x=""
non_leap_cycle_2_1="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                             "
non_leap_cycle_2_2="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28                                                             "
non_leap_cycle_2_3="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                    "
non_leap_cycle_2_4="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                   "
non_leap_cycle_2_5="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                          "
non_leap_cycle_2_6="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                    "
non_leap_cycle_2_7="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                "
non_leap_cycle_2_8="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                       "
non_leap_cycle_2_9=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                      "
non_leap_cycle_2_10="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                             "
non_leap_cycle_2_11="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                       "
non_leap_cycle_2_12=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                   "
non_leap_cycle_3_x=""
non_leap_cycle_3_1="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                          "
non_leap_cycle_3_2="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28                                                          "
non_leap_cycle_3_3="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                 "
non_leap_cycle_3_4="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                "
non_leap_cycle_3_5="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                       "
non_leap_cycle_3_6=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                      "
non_leap_cycle_3_7="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                             "
non_leap_cycle_3_8="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                    "
non_leap_cycle_3_9="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                   "
non_leap_cycle_3_10="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                          "
non_leap_cycle_3_11="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                    "
non_leap_cycle_3_12="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                "
non_leap_cycle_4_x=""
non_leap_cycle_4_1="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                       "
non_leap_cycle_4_2=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28                                                                            "
non_leap_cycle_4_3=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                   "
non_leap_cycle_4_4="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                             "
non_leap_cycle_4_5="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                    "
non_leap_cycle_4_6="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                   "
non_leap_cycle_4_7="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                          "
non_leap_cycle_4_8="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                 "
non_leap_cycle_4_9="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                "
non_leap_cycle_4_10="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                       "
non_leap_cycle_4_11=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                      "
non_leap_cycle_4_12="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                             "
non_leap_cycle_5_x=""
non_leap_cycle_5_1="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                    "
non_leap_cycle_5_2="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28                                                                         "
non_leap_cycle_5_3="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                "
non_leap_cycle_5_4="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                          "
non_leap_cycle_5_5="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                 "
non_leap_cycle_5_6="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                "
non_leap_cycle_5_7="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                       "
non_leap_cycle_5_8=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                   "
non_leap_cycle_5_9="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                             "
non_leap_cycle_5_10="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                    "
non_leap_cycle_5_11="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                   "
non_leap_cycle_5_12="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                          "
non_leap_cycle_6_x=""
non_leap_cycle_6_1="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                 "
non_leap_cycle_6_2="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28                                                                      "
non_leap_cycle_6_3="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                             "
non_leap_cycle_6_4="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                       "
non_leap_cycle_6_5=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                   "
non_leap_cycle_6_6="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                             "
non_leap_cycle_6_7="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                    "
non_leap_cycle_6_8="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                "
non_leap_cycle_6_9="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                          "
non_leap_cycle_6_10="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                 "
non_leap_cycle_6_11="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                "
non_leap_cycle_6_12="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                       "
leap_cycle_0_x=""
leap_cycle_0_1=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                   "
leap_cycle_0_2="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29                                                                "
leap_cycle_0_3="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                       "
leap_cycle_0_4=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                      "
leap_cycle_0_5="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                             "
leap_cycle_0_6="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                       "
leap_cycle_0_7=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                   "
leap_cycle_0_8="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                          "
leap_cycle_0_9="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                    "
leap_cycle_0_10="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                "
leap_cycle_0_11="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                          "
leap_cycle_0_12="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                 "
leap_cycle_1_x=""
leap_cycle_1_1="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                "
leap_cycle_1_2="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29                                                             "
leap_cycle_1_3="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                    "
leap_cycle_1_4="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                   "
leap_cycle_1_5="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                          "
leap_cycle_1_6="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                    "
leap_cycle_1_7="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                "
leap_cycle_1_8="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                       "
leap_cycle_1_9=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                      "
leap_cycle_1_10="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                             "
leap_cycle_1_11="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                       "
leap_cycle_1_12=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                   "
leap_cycle_2_x=""
leap_cycle_2_1="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                             "
leap_cycle_2_2="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29                                                          "
leap_cycle_2_3="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                 "
leap_cycle_2_4="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                "
leap_cycle_2_5="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                       "
leap_cycle_2_6=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                      "
leap_cycle_2_7="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                             "
leap_cycle_2_8="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                    "
leap_cycle_2_9="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                   "
leap_cycle_2_10="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                          "
leap_cycle_2_11="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                    "
leap_cycle_2_12="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                "
leap_cycle_3_x=""
leap_cycle_3_1="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                          "
leap_cycle_3_2="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29                                                       "
leap_cycle_3_3=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                   "
leap_cycle_3_4="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                             "
leap_cycle_3_5="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                    "
leap_cycle_3_6="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                   "
leap_cycle_3_7="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                          "
leap_cycle_3_8="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                 "
leap_cycle_3_9="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                "
leap_cycle_3_10="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                       "
leap_cycle_3_11=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                      "
leap_cycle_3_12="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                             "
leap_cycle_4_x=""
leap_cycle_4_1="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                       "
leap_cycle_4_2=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29                                                                         "
leap_cycle_4_3="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                "
leap_cycle_4_4="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                          "
leap_cycle_4_5="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                 "
leap_cycle_4_6="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                "
leap_cycle_4_7="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                       "
leap_cycle_4_8=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                   "
leap_cycle_4_9="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                             "
leap_cycle_4_10="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                    "
leap_cycle_4_11="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                   "
leap_cycle_4_12="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                          "
leap_cycle_5_x=""
leap_cycle_5_1="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                    "
leap_cycle_5_2="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29                                                                      "
leap_cycle_5_3="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                             "
leap_cycle_5_4="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                       "
leap_cycle_5_5=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                   "
leap_cycle_5_6="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                             "
leap_cycle_5_7="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                    "
leap_cycle_5_8="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                "
leap_cycle_5_9="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                          "
leap_cycle_5_10="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                 "
leap_cycle_5_11="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                                "
leap_cycle_5_12="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                       "
leap_cycle_6_x=""
leap_cycle_6_1="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                 "
leap_cycle_6_2="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29                                                                   "
leap_cycle_6_3="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                          "
leap_cycle_6_4="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                    "
leap_cycle_6_5="    1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                "
leap_cycle_6_6="             1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                          "
leap_cycle_6_7="                   1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                 "
leap_cycle_6_8="       1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                             "
leap_cycle_6_9="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                       "
leap_cycle_6_10=" 1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                                   "
leap_cycle_6_11="          1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30                                                             "
leap_cycle_6_12="                1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31                                                    "


PROGRAM="${0##*/}"

USAGE="$PROGRAM - a perpetual calendar
Usage: $PROGRAM [[mm [yyyy] [-h]

-h          disable bolding
--help      show this help
mm          1-12 or jan-dec
yyyy        1753-9999
"

_center()
{
        printf "%*s\n" $(( (${1} + ${#2}) / 2)) "$2"
}

_print_month()
{
	months=(UNUSED January February March April May June July
		August September October November December)

        _center 21 "${months[m]} $y"

        printf "%s\n" "Su Mo Tu We Th Fr Sa"

	for ((i=0; i<126; ((i+=21)) ))
	do
		for ((n=i; n<=((i+19)); ((n+=3))))
		do
			if [ "$d" = "${cal:n:3}" ]; then
				case ${#d} in
					1) printf "\e[7m%s\e[27m" "${cal:n:1}";;
					3) printf "\e[7m%s\e[27m " "${cal:n:2}";;
				esac
			else
			printf "%s" "${cal:n:3}"
			fi
		done
		echo
	done
}

_month_array()
{
	if [ $(($1 % 4)) -eq 0 ] &&
	   [ $(($1 % 100)) -ne 0 ] ||
	   [ $(($1 % 400)) -eq 0 ]; then
		len=("" 31 29 31 30 31 30 31 31 30 31 30 31)
	else
		len=("" 31 28 31 30 31 30 31 31 30 31 30 31)
	fi
}

_is_leap()
{
	if ((y % 4 == 0 )) && ((y % 100 != 0 )) || ((y % 400 == 0 )); then
		leap=1
	fi
}

_day_of_week()
{
        mcodes=(UNUSED 6 2 2 5 0 3 5 1 4 6 2 4)
        w=$(( (($1 / 4) - ($1 / 100)) + ($1 / 400) + 1 + $1 + mcodes[1] ))

        echo $((w % 7))
}

_is_day_valid()
{
	_month_array $3
	if (($2 > len[$1] )) || (($2 < 0)); then
		echo "$PROGRAM: day out of range [1-${len[$1]}]"
		return 1
	fi
}

_is_year_valid()
{
	case $1 in
		0*|*[a-zA-Z]*)
        	echo "$PROGRAM: year out of range [1753-9999]"
                return 1
	esac

	if [ $1 -lt 1753 ] || [ $1 -gt 9999 ]; then
        	echo "$PROGRAM: year out of range [1753-9999]"
                return 1
	fi
}

_is_month_valid()
{
	if [ $1 -gt 12 ] || [ $1 -lt 1 ]; then
		 echo "$PROGRAM: month out of range [1-12]"
		return 1
	fi
}

_is_date_valid()
{
	ex=

	case $1 in
		*[!0-9]*)
			_parse_month $1
                        ex=$?
                        case $ex in
                        	255)
                                	echo "$PROGRAM: invalid date"
                                        exit 1
                                        ;;
				*)
					shift
					;;
                                esac
				;;
		*)
			ex=$1
			shift
	esac

	for i
	do
		case $i in
			0*|*[!0-9]*)
				echo "$PROGRAM: invalid date"
				exit 1
				;;
		esac
	done

	set -- $ex $1
	if [ $# -eq 0 ]; then
		return 0
	elif [ $# -eq 1 ]; then
		m=$ex
		_is_month_valid $m || exit 1
	elif [ $# -eq 2 ]; then
		m=$ex
		_is_month_valid $m || exit 1
		_is_year_valid $y || exit 1
	fi
}

_parse_month()
{
        case $1 in
                1|jan* )   return 1 ;;
                2|feb* )   return 2 ;;
                3|mar* )   return 3 ;;
                4|apr* )   return 4 ;;
                5|may* )   return 5 ;;
                6|jun* )   return 6 ;;
                7|jul* )   return 7 ;;
                8|aug* )   return 8 ;;
                9|sep* )   return 9 ;;
                10|oct*)   return 10 ;;
                11|nov*)   return 11 ;;
                12|dec*)   return 12 ;;
                      *)   return 255 ;;
        esac
}

if [ "$1" = "--help" ]; then
	echo "$USAGE"
	exit 0
fi

unset no_highlight
if [ "$1" = "-h" ]; then
	no_highlight=1
	shift
fi

case $# in
	1)
		m="$1"
		d="0"
		y="$(printf "%(%_Y)T")"
		;;
	2)
		m="$1"
		d="0"
		y="$2"
		;;
	3)
		m="$1"
		d="$2"
		y="$3"
		;;
	*)
		m="$(printf "%(%_m)T")"
		d="$(printf "%(%_d)T")"
		y="$(printf "%(%_Y)T")"
		;;
esac

_is_date_valid $m $y || exit 1

if [ $no_highlight ]; then
	d=0
fi

_is_day_valid $m $d $y || exit 1

case ${#d} in
	1) d=" $d " ;;
	2) d="$d " ;;
esac

unset leap
_is_leap $y

dow=$(_day_of_week $y)

if [ $leap ]; then
	[ $dow -eq 0 ] && ((dow=7))
	case $((--dow)) in
		0)	eval cal="\$leap_cycle_0_${m}" ;;
		1)	eval cal="\$leap_cycle_1_${m}" ;;
		2)	eval cal="\$leap_cycle_2_${m}" ;;
		3)	eval cal="\$leap_cycle_3_${m}" ;;
		4)	eval cal="\$leap_cycle_4_${m}" ;;
		5)	eval cal="\$leap_cycle_5_${m}" ;;
		6)	eval cal="\$leap_cycle_6_${m}" ;;
	esac
else
	case $dow in
		0)	eval cal="\$non_leap_cycle_0_${m}" ;;
		1)	eval cal="\$non_leap_cycle_1_${m}" ;;
		2)	eval cal="\$non_leap_cycle_2_${m}" ;;
		3)	eval cal="\$non_leap_cycle_3_${m}" ;;
		4)	eval cal="\$non_leap_cycle_4_${m}" ;;
		5)	eval cal="\$non_leap_cycle_5_${m}" ;;
		6)	eval cal="\$non_leap_cycle_6_${m}" ;;
	esac
fi

_print_month
