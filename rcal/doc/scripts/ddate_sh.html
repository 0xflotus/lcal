<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>ddate.sh - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../AUTHOR.html">AUTHOR</a>
  
    <li><a href="../COPYING.html">COPYING</a>
  
    <li><a href="../README.html">README</a>
  
    <li><a href="../make_sh.html">make.sh</a>
  
    <li><a href="../man/rcal_1.html">rcal.1</a>
  
    <li><a href="../man/rcal_1_ronn.html">rcal.1.ronn</a>
  
    <li><a href="../rcal_gemspec.html">rcal.gemspec</a>
  
    <li><a href="../scripts/dcal_sh.html">dcal.sh</a>
  
    <li><a href="../scripts/ddate_sh.html">ddate.sh</a>
  
    <li><a href="../scripts/gd_conversion_sh.html">gd_conversion.sh</a>
  
    <li><a href="../scripts/gdj_conversion_sh.html">gdj_conversion.sh</a>
  
    <li><a href="../scripts/rcal-funcs_sh.html">rcal-funcs.sh</a>
  
    <li><a href="../scripts/rcalhtml_sh.html">rcalhtml.sh</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page scripts/ddate.sh">

<p>#!/bin/bash # # SCRIPT: ddate.sh # AUTHOR: Luciano D. Cecere # DATE:
06/15/2015-01:13:37 PM
######################################################################## #
# ddate.sh - Generate Discordian date (ddate clone) # Copyright (C) 2015
Luciano D. Cecere &lt;ldante86@aol.com&gt; # # This program is free
software: you can redistribute it and/or modify # it under the terms of the
GNU General Public License as published by # the Free Software Foundation,
either version 2 of the License, or # (at your option) any later version. #
# This program is distributed in the hope that it will be useful, # but
WITHOUT ANY WARRANTY; without even the implied warranty of #
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the # GNU General
Public License for more details. # # You should have received a copy of the
GNU General Public License # along with this program.  If not, see &lt;<a
href="http://www.gnu.org/licenses">www.gnu.org/licenses</a>/&gt;. #
########################################################################</p>

<p>export PATH=/bin:/usr/bin unalias -a PROGRAM=“${0##*/}”</p>

<p>WEEKDAY=(Sweetmorn Boomtime Pungenday Prickle-Prickle “Setting Orange”)
APOSTLE=(Mungday Mojoday Syaday Zaraday Maladay) HOLYDAY=(Chaoflux
Discoflux Confuflux Bureflux Afflux) SEASONS=(Chaos Discord Confusion
Bureaucracy “The Aftermath”)</p>

<p>month_len() {</p>

<pre>case $1 in
  4|6|9|11)
    echo 30
    ;;
  1|3|5|7|8|10|12)
    echo 31
    ;;
  2)
    if [[ $(($2 % 4)) -eq 0 &amp;&amp; $(($2 % 100)) -ne 0 || $(($2 % 400)) -eq 0 ]]; then
      echo 29
    else
      echo 28
    fi
esac</pre>

<p>}</p>

<p>ordinal() {</p>

<pre>case ${1:$((${#1}-2)):2} in
  [2-9][1]|1  )  echo ${1}st ;;
  [2-9][2]|2  )  echo ${1}nd ;;
  [2-9][3]    )  echo ${1}rd ;;
  [1][1-9]|*  )  echo ${1}th ;;
esac</pre>

<p>}</p>

<p>### PROGRAM START ###</p>

<p>if [ “$1” = “-h” ]; then</p>

<pre class="ruby"><span class="ruby-identifier">echo</span> <span class="ruby-constant">Usage</span><span class="ruby-operator">:</span> <span class="ruby-identifier">$PROGRAM</span> [<span class="ruby-operator">-</span><span class="ruby-identifier">h</span>] [<span class="ruby-constant">MM</span> <span class="ruby-constant">DD</span> <span class="ruby-constant">YYYY</span>]
<span class="ruby-identifier">exit</span> <span class="ruby-value">0</span>
</pre>

<p>fi</p>

<p>if [ $# -eq 4 ]; then</p>

<pre>case $4 in
  1|0)  MODE=$4 ;;
esac</pre>

<p>elif  [ $# -eq 1 ]; then</p>

<pre>case $1 in
  1|0)
    MODE=$1 
    shift
    ;;
  *|&quot; &quot;)
    shift
    ;;
esac</pre>

<p>else</p>

<pre class="ruby"><span class="ruby-constant">MODE</span>=<span class="ruby-value">0</span>
</pre>

<p>fi</p>

<p>M=${1:-$(date +%_m)}</p>
<dl class="rdoc-list label-list"><dt> $M -ne $(date +%_m) 
<dd>
<p>&amp;&amp; MODE=1</p>
</dd></dl>

<p>D=${2:-$(date +%_d)}</p>
<dl class="rdoc-list label-list"><dt> $D -ne $(date +%_d) 
<dd>
<p>&amp;&amp; MODE=1</p>
</dd></dl>

<p>YEAR=${3:-$(date +%Y)}</p>
<dl class="rdoc-list label-list"><dt> $YEAR -ne $(date +%Y) 
<dd>
<p>&amp;&amp; MODE=1</p>
</dd></dl>

<p>Y=$(( ${3:-$(date +%Y)} + 1166 ))</p>

<p>if [ $M -gt 12 ]; then</p>

<pre class="ruby"><span class="ruby-identifier">echo</span> <span class="ruby-constant">Month</span> <span class="ruby-identifier">out</span> <span class="ruby-identifier">of</span> <span class="ruby-identifier">range</span>
<span class="ruby-identifier">exit</span> <span class="ruby-value">1</span>
</pre>

<p>fi</p>

<p>if [ $D -gt $(month_len $M $YEAR) ] || [ $D -le 0 ]; then</p>

<pre class="ruby"><span class="ruby-identifier">echo</span> <span class="ruby-constant">Day</span> <span class="ruby-identifier">out</span> <span class="ruby-identifier">of</span> <span class="ruby-identifier">range</span>
<span class="ruby-identifier">exit</span> <span class="ruby-value">1</span>
</pre>

<p>fi</p>

<p>if [ $(month_len $M $YEAR) -eq 29 ] &amp;&amp; [ $M -eq 2 -a $D -eq 29 ];
then</p>

<pre class="ruby"><span class="ruby-identifier">echo</span> <span class="ruby-string">&quot;St. Tib&#39;s Day, $Y YOLD&quot;</span>
<span class="ruby-identifier">exit</span> <span class="ruby-value">0</span>
</pre>

<p>fi</p>

<p>days=$D</p>

<p>for (( m=1; m&lt;$M; m++ )) do</p>

<pre>((days+=$(month_len $m $YEAR)))</pre>

<p>done</p>

<p>dayofyear=$days</p>

<p>if [ $(month_len 2 $YEAR) -eq 29 ] &amp;&amp; [ $dayofyear -ge 60 ]; then</p>

<pre class="ruby">((<span class="ruby-operator">-</span><span class="ruby-operator">-</span><span class="ruby-identifier">dayofyear</span>))
</pre>

<p>fi</p>

<p>seasonday=$(( dayofyear % 73 ))</p>
<dl class="rdoc-list label-list"><dt> $seasonday -eq 0 
<dd>
<p>&amp;&amp; seasonday=73</p>
</dd></dl>

<p>case $seasonday in</p>

<pre> 5)
   echo Today is &quot;${APOSTLE[$((dayofyear / 73))]}&quot;, in the YOLD $Y
   exit
   ;;
50)
   echo Today is &quot;${HOLYDAY[$((dayofyear / 73))]}&quot;, in the YOLD $Y
   exit
   ;;
 *)
   case $dayofyear in
     73|146|219|291|365)
       season=&quot;${SEASONS[$((dayofyear / 73))-1]}&quot;
       ;;
     *)
       season=&quot;${SEASONS[$((dayofyear / 73))]}&quot;
       ;;
   esac
   ;;</pre>

<p>esac</p>

<p>dayofweek=“${WEEKDAY[$(( (dayofyear-1)%5))]}”</p>

<p>case $MODE in</p>

<pre>0)
  echo -n &quot;Today is $dayofweek, the $(ordinal $seasonday) &quot;
  echo &quot;day of $season in the YOLD $Y&quot;
  ;;
1)
  echo &quot;$dayofweek, $season $seasonday, $Y YOLD&quot;
  ;;</pre>

<p>esac</p>

<p>### EOF ###</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

